"use strict";const connection=(new signalR.HubConnectionBuilder).withUrl("/Ntfctn?KEY=321").configureLogging(signalR.LogLevel.Information).build();connection.serverTimeoutInMilliseconds=1e5;connection.on("ReceiveMessage",function(n,t,i){t==="Arda"&&(t=n);$("div[role='tabpanel'][class*='active']").find("."+t).append("<li class='left clearfix'>"+i+"<\/li>")});connection.on("GiveName",function(n){$("#txtuser").val(n)});connection.on("SayHello",function(n){$("#onlinehost").html(n);$("#chatheader").removeClass();$("#chatheader").addClass("chat-header");$("#chatheader").addClass(n)});connection.on("ReceiveNotification",function(n){$("#notifypopup").html(n);$("#centralModalInfo").modal("show")});connection.onclose(function(){alert("Please refresh connections...");$("#nav-tabs").find(".active").remove()});$(document).ready(function(){$("#txtmessage").keyup(function(){}).keydown(function(n){n.which==13&&(n.preventDefault(),document.getElementById("btnsendmessage").click())})});$("#btnsendmessage").on("click",function(n){var r=$("#txtuser").val(),t=$("#txtmessage").val(),u=document.getElementById("chatcontent"),i;u.scrollTop+=1e3;i={username:r,message:t};t&&connection.invoke("SendPrivateMessage",i).catch(n=>{console.error(n),connection.start()});n.preventDefault()});connection.on("iamin",function(n){$("div[class*='active']").removeClass("active");$("li[class*='active']").removeClass("active");$("#txtmessage").val("#"+n+":");$("#nav-tabs").append(`<li role="presentation" class="active" name="`+n+`">
                                <a href="#`+n+`" aria-controls="`+n+`" role="tab" data-toggle="tab">
                                    <img class="img-circle" src="http://placehold.it/50/FA6F57/fff&text=`+n+`" />
                                </a>
                            </li>`);$("#tabs-collapse").append(`<div role="tabpanel" class="tab-pane fade in active" id="`+n+`">
                                    <div class="tab-inner">
                                        <div class="panel panel-primary">
                                            <div class="panel-heading" >
                                                <div class="row">
                                                    <div class="col-md-5">
                                                        <span class="glyphicon glyphicon-comment"></span> Chat with `+n+`
                                                    </div>
                                                    <div class="col-md-7">
                                                        <div style="margin:1px 1px" class="text-right">
                                                            <button class="btn  btn-xs btn-success arstatus" data-status="Online" id="btnonline">Online</button>
                                                            <button class="btn btn-xs btn-danger arstatus" data-status="Busy" id="btnbusy">Busy</button>
                                                            <button class="btn btn-xs btn-warning arstatus" data-status="Away" id="btnaway">Away</button>
                                                            <button class="btn btn-xs btn-default arstatus" data-status="Offline" id="btnoffline">Offline</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel-collapse collapse in">
                                                <div class="panel-body" id="chatcontent">
                                                    <ul class="chat admin `+n+`">

                                                    </ul>
                                                </div>
                                                <div class="panel-footer">

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <input type="hidden" value="`+n+`"  class="usernametext" />
                                </div>`);$("#nav-tabs li[class='active'] a").on("click",function(){$("#txtmessage").val($(this).attr("href")+": ")})});connection.on("iamout",function(n){console.log(n)});connection.start().catch(n=>console.error(n));