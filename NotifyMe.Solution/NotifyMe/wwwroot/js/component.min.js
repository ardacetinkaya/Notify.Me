"use strict";Vue.component("chat",{template:`<div id="content-wrap" style="padding:10px;">
                    <div class="panel panel-primary">
                        <div class="panel-heading" id="accordion">
                            <span class="glyphicon glyphicon-comment"></span> Chat
                            <div class="btn-group pull-right">
                                <span id="onlinehost"></span>
                            </div>
                        </div>
                        <div class="panel-collapse collapse in" id="collapseOne">
                            <div class="panel-body" id="chatcontent" style="height:250px;overflow-y:scroll">
                                <ul id="messagesList" class="chat" v-for="item in items" >
                                    <li class="left clearfix" v-html="item"></li>
                                </ul>
                            </div>
                            <div class="panel-footer">
                                <div>
                                    <input class="form-control input-sm" type="text" value="visitor" id="txtuser" placeholder='Type your nick here...' />
                                    <input id="txtmessage" v-on:keyup.enter="sendMessage" maxlength="250" type="text" class="form-control input-sm" placeholder="Type your message here..." />
                                    <span class="input-group-btn" style="text-align:right;padding-top:5px">
                                        <button @click.prevent="sendMessage"  class="btn btn-info btn-sm" id="btnsendmessage">
                                            Send
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>`,props:["accessKey"],data:function(){return{connecition:null,access:this.accessKey,licensed:!1,items:[]}},created:function(){if(this.accessKey!="5DKZeomcebBrIQAKKXd79n4njerHaLRK"){console.error("Invalid key for component.");return}this.licensed=!0;console.log("Component is created.Please wait for connection.");console.log("Connecting...");this.connection=(new signalR.HubConnectionBuilder).withUrl("/Ntfctn?key="+this.accessKey).configureLogging(signalR.LogLevel.Information).build();this.connection.serverTimeoutInMilliseconds=3e5},mounted:function(){var n=this;if(this.licensed){n.connection.onclose(function(){console.log("Connecition is closed")});n.connection.on("GiveName",function(n){$("#txtuser").val(n)});n.connection.on("SayHello",function(n){$("#onlinehost").html(n)});n.connection.on("ReceiveMessage",function(n,t){try{component.$refs.box?component.$refs.box.addMessage(t):console.error("Invalid ref value for component. Please keep 'ref=\"box\"' attribute as default.")}catch(i){console.log(i.message)}});n.connection.start().catch(n=>console.error(n));console.log("Component is connected")}},methods:{sendMessage:function(){var t,i;try{var r=this,u=$("#txtuser").val(),n=$("#txtmessage").val();$("#txtmessage").val("");t=$("chatcontent");t.scrollTop+=1e3;i={username:u,message:n};n&&r.connection.invoke("SendPrivateMessage",i).catch(n=>console.error(n))}catch(f){console.log(f.message)}},addMessage:function(n){var t=this;t.items.push(n);console.log("Component's addMessage is fired.")}}});